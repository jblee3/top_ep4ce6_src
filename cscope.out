cscope 15 $HOME/Study/Verilog/top_ep4ce6_src               0000007902
	@beep.v

2 
moduË
 
b“p
(

3 
šput
 
wœe
 
şk
,

4 
ouut
 
wœe
 
b“p
 );

6 
»g
 
	gb“p_r
;

7 
	g»g
[27:0]
couÁ
;

9 
assign
 
	gb“p
 = 
b“p_r
;

11 
	g®ways
@(
po£dge
 
	gşk
)

12 
begš


13 
	gcouÁ
 <ğ
couÁ
 + 1'b1;

14 
’d


16 
®ways
 @(
couÁ
[9])

17 
begš


18 
b“p_r
 = !(
couÁ
[13] & count[24] & count[27]);

19 
’d


21 
	g’dmoduË


	@led_twinkle.v

1 
moduË
 
Ëd_twškË
(

2 
šput
 
şk
,

3 
ouut
 
»g
 [3:0] 
Ëd
 );

5 
	g»g
[24:0] 
couÁ”
;

7 
	g®ways
@(
po£dge
 
	gşk
)

8 
begš


9 
	gcouÁ”
<=
couÁ”
+1;

11 if(
	gcouÁ”
==25'd25000000)

12 
begš


13 
Ëd
<=~led;

14 
	gcouÁ”
<=0;

15 
’d


16 
’d


17 
	g’dmoduË


	@my_and.v

1 
moduË
 
my_ªd
 (
šput
 
a
,

2 
šput
 
b
,

3 
ouut
 
c
);

4 
assign
 
	gc
 = 
a
&
b
;

6 
	g’dmoduË


	@my_decode.v

1 
moduË
 
my_decode
 (

2 
šput
 
wœe
 [1:0] 
i
,

3 
šput
 
wœe
 
e
,

4 
ouut
 
»g
 [3:0] 
y
 );

6 
	g®ways
 @(
	gi
, 
	ge
è
begš


7 ià(
	ge
è
begš


8 
	gy
=4'b1111;

9 
’d


10 
begš


11 (
i
)

12 2'b00: y=4'
b1110
;

13 2'b01: y=4'
	gb1101
;

14 2'b10: y=4'
	gb1011
;

15 2'b11: y=4'
	gb0111
;

16 : 
y
=4'b1111;

17 
’dÿ£


18 
’d


19 
’d


21 
’dmoduË


	@my_sel.v

1 
moduË
 
my_£l
 (

2 
šput
 
wœe
 
a
,

3 
šput
 
wœe
 
b
,

4 
šput
 
wœe
 
£l
,

5 
ouut
 
wœe
 
c
 );

7 
assign
 
	gc
 = 
£l
?
a
:
b
;

9 
	g’dmoduË


	@my_uart_rx.v

1 `
	gtimesÿË
 1
	gns
 / 1
ps


3 
moduË
 
my_u¬t_rx
(

4 
şk
,

5 
r¡_n
,

6 
rs232_rx
,

7 
rx_d©a
,

8 
rx_št
,

9 
şk_bps
,

10 
bps_¡¬t


13 
šput
 
	gşk
;

14 
šput
 
	gr¡_n
;

15 
šput
 
	grs232_rx
;

16 
šput
 
	gşk_bps
;

17 
ouut
 
	gbps_¡¬t
;

18 
	gouut
[7:0] 
rx_d©a
;

19 
ouut
 
	grx_št
;

22 
»g
 
	grs232_rx0
,
	grs232_rx1
,
	grs232_rx2
,
	grs232_rx3
;

23 
wœe
 
	gÃg_rs232_rx
;

25 
	g®ways
 @ (
po£dge
 
şk
 
Ü
 
Ãgedge
 
	gr¡_n
è
begš


26 if(!
	gr¡_n
è
begš


27 
	grs232_rx0
 <= 1'b0;

28 
rs232_rx1
 <= 1'b0;

29 
rs232_rx2
 <= 1'b0;

30 
rs232_rx3
 <= 1'b0;

31 
’d


32 
begš


33 
rs232_rx0
 <ğ
rs232_rx
;

34 
	grs232_rx1
 <ğ
rs232_rx0
;

35 
	grs232_rx2
 <ğ
rs232_rx1
;

36 
	grs232_rx3
 <ğ
rs232_rx2
;

37 
’d


38 
’d


42 
assign
 
	gÃg_rs232_rx
 = 
rs232_rx3
 & 
rs232_rx2
 & ~
rs232_rx1
 & ~
rs232_rx0
;

45 
»g
 
	gbps_¡¬t_r
;

46 
	g»g
[3:0] 
num
;

47 
»g
 
	grx_št
;

49 
	g®ways
 @ (
po£dge
 
şk
 
Ü
 
Ãgedge
 
	gr¡_n
)

50 if(!
	gr¡_n
è
begš


51 
	gbps_¡¬t_r
 <= 1'bz;

52 
rx_št
 <= 1'b0;

53 
’d


54 if(
Ãg_rs232_rx
è
begš


55 
bps_¡¬t_r
 <= 1'b1;

56 
rx_št
 <= 1'b1;

57 
’d


58 if(
num
==4'd11) begin

59 
bps_¡¬t_r
 <= 1'b0;

60 
rx_št
 <= 1'b0;

61 
’d


63 
assign
 
bps_¡¬t
 = 
bps_¡¬t_r
;

66 
	g»g
[7:0] 
rx_d©a_r
;

69 
	g»g
[7:0] 
rx_‹mp_d©a
;

71 
	g®ways
 @ (
po£dge
 
şk
 
Ü
 
Ãgedge
 
	gr¡_n
)

72 if(!
	gr¡_n
è
begš


73 
	grx_‹mp_d©a
 <= 8'd0;

74 
num
 <= 4'd0;

75 
rx_d©a_r
 <= 8'd0;

76 
’d


77 if(
rx_št
è
begš


78 if(
şk_bps
è
begš


79 
num
 <=‚um+1'b1;

80 (
num
)

90 
’dÿ£


91 
’d


92 if(
	gnum
 == 4'd11) begin //1+8+1(2)=11bit

93 
num
 <= 4'd0; //STOP,‚um

94 
rx_d©a_r
 <ğ
rx_‹mp_d©a
;

95 
’d


96 
’d


98 
assign
 
	grx_d©a
 = 
rx_d©a_r
;

100 
	g’dmoduË


	@my_uart_top.v

2 `
	gtimesÿË
 1
	gns
 / 1
ps


4 
moduË
 
my_u¬t_tİ
(

5 
şk
,
r¡_n
,

6 
rs232_rx
,
rs232_tx


9 
šput
 
	gşk
;

10 
šput
 
	gr¡_n
;

12 
šput
 
	grs232_rx
;

13 
ouut
 
	grs232_tx
;

15 
wœe
 
	gbps_¡¬t1
,
	gbps_¡¬t2
;

16 
wœe
 
	gşk_bps1
,
	gşk_bps2
;

17 
	gwœe
[7:0] 
rx_d©a
;

18 
wœe
 
	grx_št
;

23 
¥“d_£Ëù
 
¥“d_rx
(

24 .
şk
(clk),

25 .
r¡_n
(rst_n),

26 .
bps_¡¬t
(
bps_¡¬t1
),

27 .
şk_bps
(
şk_bps1
)

30 
my_u¬t_rx
 my_uart_rx(

31 .
şk
(clk),

32 .
r¡_n
(rst_n),

33 .
rs232_rx
(rs232_rx),

34 .
rx_d©a
(rx_data),

35 .
rx_št
(rx_int),

36 .
şk_bps
(
şk_bps1
),

37 .
bps_¡¬t
(
bps_¡¬t1
)

41 
¥“d_£Ëù
 
¥“d_tx
(

42 .
şk
(clk),

43 .
r¡_n
(rst_n),

44 .
bps_¡¬t
(
bps_¡¬t2
),

45 .
şk_bps
(
şk_bps2
)

48 
my_u¬t_tx
 my_uart_tx(

49 .
şk
(clk),

50 .
r¡_n
(rst_n),

51 .
rx_d©a
(rx_data),

52 .
rx_št
(rx_int),

53 .
rs232_tx
(rs232_tx),

54 .
şk_bps
(
şk_bps2
),

55 .
bps_¡¬t
(
bps_¡¬t2
)

58 
	g’dmoduË


	@my_uart_tx.v

1 `
	gtimesÿË
 1
	gns
 / 1
ps


3 
moduË
 
my_u¬t_tx
(

4 
şk
,
r¡_n
,

5 
rx_d©a
,
rx_št
,
rs232_tx
,

6 
şk_bps
,
bps_¡¬t


9 
šput
 
	gşk
;

10 
šput
 
	gr¡_n
;

11 
šput
 
	gşk_bps
;

12 
	gšput
[7:0] 
rx_d©a
;

13 
šput
 
	grx_št
;

14 
ouut
 
	grs232_tx
;

15 
ouut
 
	gbps_¡¬t
;

18 
»g
 
	grx_št0
,
	grx_št1
,
	grx_št2
;

19 
wœe
 
	gÃg_rx_št
;

21 
assign
 
	grs232_tx
 = 
rs232_tx_r
;

23 
	g®ways
 @ (
po£dge
 
şk
 
Ü
 
Ãgedge
 
	gr¡_n
è
begš


24 if(!
	gr¡_n
è
begš


25 
	grx_št0
 <= 1'b0;

26 
rx_št1
 <= 1'b0;

27 
rx_št2
 <= 1'b0;

28 
’d


29 
begš


30 
rx_št0
 <ğ
rx_št
;

31 
	grx_št1
 <ğ
rx_št0
;

32 
	grx_št2
 <ğ
rx_št1
;

33 
’d


34 
’d


36 
assign
 
	gÃg_rx_št
 = ~
rx_št1
 & 
rx_št2
;

39 
	g»g
[7:0] 
tx_d©a
;

41 
»g
 
	gbps_¡¬t_r
;

42 
»g
 
	gtx_’
;

43 
	g»g
[3:0] 
num
;

45 
	g®ways
 @ (
po£dge
 
şk
 
Ü
 
Ãgedge
 
	gr¡_n
è
begš


46 if(!
	gr¡_n
è
begš


47 
	gbps_¡¬t_r
 <= 1'bz;

48 
tx_’
 <= 1'b0;

49 
tx_d©a
 <= 8'd0;

50 
’d


51 if(
Ãg_rx_št
è
begš


52 
bps_¡¬t_r
 <= 1'b1;

53 
tx_d©a
 <ğ
rx_d©a
;

54 
	gtx_’
 <= 1'b1;

55 
’d


56 if(
num
==4'd11) begin

57 
bps_¡¬t_r
 <= 1'b0;

58 
tx_’
 <= 1'b0;

59 
’d


60 
’d


62 
assign
 
bps_¡¬t
 = 
bps_¡¬t_r
;

65 
»g
 
	grs232_tx_r
;

67 
	g®ways
 @ (
po£dge
 
şk
 
Ü
 
Ãgedge
 
	gr¡_n
è
begš


68 if(!
	gr¡_n
è
begš


69 
	gnum
 <= 4'd0;

70 
rs232_tx_r
 <= 1'b1;

71 
’d


72 if(
tx_’
è
begš


73 if(
şk_bps
è
begš


74 
num
 <=‚um+1'b1;

75 (
num
)

76 4'd0:„s232_tx_¸<ğ1'
b0
;

85 4'd9:„s232_tx_¸<ğ1'
	gb1
;

86 : 
rs232_tx_r
 <= 1'b1;

87 
’dÿ£


88 
’d


89 if(
num
==4'd11ènum <ğ4'
d0
;

90 
’d


91 
’d


93 
	g’dmoduË


	@sled.v

2 
moduË
 
¦ed
(

3 
šput
 
wœe
 
şock
,

4 
ouut
 
»g
 [7:0] 
£g
,

5 
ouut
 
»g
 [3:0] 
dig
 );

7 
	g»g
 [3:0] 
di¥_d©
;

8 
	g»g
 [36:0] 
couÁ
;

10 
	g®ways
 @ (
po£dge
 
	gşock
 )

11 
begš


12 
	gcouÁ
 = 
couÁ
 + 1'b1;

13 
dig
 = 4'b0000;

14 
’d


16 
®ways
 @ (
couÁ
[24])

17 
begš


18 
di¥_d©
 = {
couÁ
[28:25]};

19 
’d


21 
	g®ways
 @ (
	gdi¥_d©
)

22 
begš


23 (
	gdi¥_d©
)

24 4'h0 : seg = 8'
	ghc0
;

25 4'h1 : seg = 8'
	ghf9
;

26 4'h2 : seg = 8'
	gha4
;

27 4'h3 : seg = 8'
	ghb0
;

28 4'h4 : seg = 8'
	gh99
;

29 4'h5 : seg = 8'
	gh92
;

30 4'h6 : seg = 8'
	gh82
;

31 4'h7 : seg = 8'
	ghf8
;

32 4'h8 : seg = 8'
	gh80
;

33 4'h9 : seg = 8'
	gh90
;

34 4'h¨: seg = 8'
	gh88
;

35 4'hb : seg = 8'
	gh83
;

36 4'hø: seg = 8'
	ghc6
;

37 4'hd : seg = 8'
	gha1
;

38 4'h: seg = 8'
	gh86
;

39 4'hà: seg = 8'
	gh8e
;

40 
’dÿ£


41 
’d


43 
	g’dmoduË


	@speed_select.v

1 `
	gtimesÿË
 1
	gns
 / 1
ps


3 
moduË
 
¥“d_£Ëù
(

4 
šput
 
wœe
 
şk
,

5 
šput
 
wœe
 
r¡_n
,

6 
šput
 
wœe
 
bps_¡¬t
,

7 
ouut
 
wœe
 
şk_bps


24 `
defše
 
	gBPS_PARA
 5207

25 `
defše
 
	gBPS_PARA_2
 2603

27 
	g»g
[12:0] 
út
;

28 
»g
 
	gşk_bps_r
;

31 
	g»g
[2:0] 
u¬t_ù¾
;

34 
assign
 
	gşk_bps
 = 
şk_bps_r
;

36 
	g®ways
 @ (
po£dge
 
şk
 
Ü
 
Ãgedge
 
	gr¡_n
)

37 
begš


38 if(!
	gr¡_n
)

39 
	gút
 <= 13'd0;

40 if((
út
 =ğ`
BPS_PARA
è|| !
bps_¡¬t
)

41 
út
 <= 13'd0;

43 
út
 <= cnt+1'b1;

44 
’d


46 
®ways
 @ (
po£dge
 
şk
 
Ü
 
Ãgedge
 
r¡_n
)

47 
begš


48 if(!
r¡_n
)

49 
şk_bps_r
 <= 1'b0; // bps_start

50 if(
út
 =ğ`
BPS_PARA_2
 && 
bps_¡¬t
)

51 
şk_bps_r
 <= 1'b1; // clk_bps_r

53 
şk_bps_r
 <= 1'b0;

54 
’d


56 
’dmoduË


	@top_ep4ce6.v

1 
moduË
 
tİ_•4û6
 (

2 
šput
 
wœe
 
»£Š
,

3 
šput
 
wœe
 
şk50m
,

4 
šput
 
wœe
 
u¬t_rx
,

5 
šput
 
wœe
 [3:0] 
sw
,

6 
ouut
 
wœe
 
u¬t_tx
,

7 
ouut
 
wœe
 
b“p
,

8 
ouut
 
wœe
 [4:0] 
Ëd
,

9 
ouut
 
wœe
 [7:0] 
£g7
,

10 
ouut
 
wœe
 [3:0] 
£g_cs
 );

12 
wœe
 
	gb“p_r
;

14 
assign
 
	gb“p
 = 
sw
[0]?
b“p_r
:1'b0;

19 
Ëd_twškË
 
Ëd_twškË0
Ğ
şk50m
, 
Ëd
 );

20 
¦ed
 
¦ed0
Ğ
şk50m
, 
£g7
, 
£g_cs
 );

21 
b“p
 
b“p0
Ğ
şk50m
, 
b“p_r
 );

23 
	g’dmoduË


	@
1
.
1
/usr/include
11
126
beep.v
led_twinkle.v
my_and.v
my_decode.v
my_sel.v
my_uart_rx.v
my_uart_top.v
my_uart_tx.v
sled.v
speed_select.v
top_ep4ce6.v
